<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin - Manage Users</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
<style>
  body { font-family: 'Poppins', sans-serif; margin:0; padding:0; background:#f7f9fc; color:#333; }
  main { max-width: 800px; margin: 40px auto; padding: 20px; }
  input, button { padding: 10px; font-size: 1rem; }
  .user-form input { width: 70%; margin-right: 10px; border-radius: 6px; border:1px solid #ccc; }
  .user-form button { border-radius:6px; border:none; background:#2c3e50; color:white; cursor:pointer; }
  .user-form button:hover { background:#1b2a38; }
  ul { list-style:none; padding:0; margin-top:20px; }
  li { background:white; padding:10px; margin-bottom:10px; border-radius:6px; display:flex; justify-content:space-between; box-shadow:0 2px 6px rgba(0,0,0,0.1);}
  li button { background:#ef4444; color:white; border:none; border-radius:6px; cursor:pointer; }
  li button:hover{ background:#b91c1c;}
</style>
</head>
<body>

<main>
  <h1>Admin Login</h1>
  <div id="loginSection">
    <input type="password" id="adminPassword" placeholder="Enter Admin Password">
    <button onclick="checkAdmin()">Login</button>
  </div>

  <div id="adminSection" style="display:none;">
    <h2>Manage Authorized Users</h2>
    <form class="user-form" id="addUserForm">
      <input type="email" id="newUserEmail" placeholder="Enter user email" required />
      <button type="submit">Add User</button>
    </form>
    <ul id="authorizedUsersList"></ul>
  </div>
</main>

<script>
const ADMIN_PASSWORD = "MySecret123"; // change to your password

function checkAdmin() {
  const input = document.getElementById("adminPassword").value;
  if(input === ADMIN_PASSWORD){
    document.getElementById("loginSection").style.display = "none";
    document.getElementById("adminSection").style.display = "block";
    renderUsers();
  } else {
    alert("Incorrect password!");
  }
}

// Load authorized users from localStorage
let authorizedUsers = JSON.parse(localStorage.getItem("authorizedUsers") || "[]");

function renderUsers() {
  const listEl = document.getElementById("authorizedUsersList");
  listEl.innerHTML = "";
  authorizedUsers.forEach((email, index) => {
    const li = document.createElement("li");
    li.textContent = email;
    const removeBtn = document.createElement("button");
    removeBtn.textContent = "Remove";
    removeBtn.onclick = () => {
      authorizedUsers.splice(index, 1);
      localStorage.setItem("authorizedUsers", JSON.stringify(authorizedUsers));
      renderUsers();
    };
    li.appendChild(removeBtn);
    listEl.appendChild(li);
  });
}

document.getElementById("addUserForm").addEventListener("submit", (e)=>{
  e.preventDefault();
  const emailInput = document.getElementById("newUserEmail");
  const email = emailInput.value.trim();
  if(email && !authorizedUsers.includes(email)){
    authorizedUsers.push(email);
    localStorage.setItem("authorizedUsers", JSON.stringify(authorizedUsers));
    renderUsers();
    emailInput.value = "";
  } else {
    alert("Email is empty or already exists.");
  }
});
</script>
</body>
</html>
